<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.105.0">
    <meta name="description" content="">


    <link rel="icon" href="/CForgeHUB/images/crossIcon1.png" type="image/png">

    <title>Multi Viewport :: CrossForge</title>

    
    <link href="/CForgeHUB/css/nucleus.css?1677668509" rel="stylesheet">
    <link href="/CForgeHUB/css/fontawesome-all.min.css?1677668509" rel="stylesheet">
    <link href="/CForgeHUB/css/hybrid.css?1677668509" rel="stylesheet">
    <link href="/CForgeHUB/css/featherlight.min.css?1677668509" rel="stylesheet">
    <link href="/CForgeHUB/css/perfect-scrollbar.min.css?1677668509" rel="stylesheet">
    <link href="/CForgeHUB/css/auto-complete.css?1677668509" rel="stylesheet">
    <link href="/CForgeHUB/css/atom-one-dark-reasonable.css?1677668509" rel="stylesheet">
    <link href="/CForgeHUB/css/theme.css?1677668509" rel="stylesheet">
    <link href="/CForgeHUB/css/tabs.css?1677668509" rel="stylesheet">
    <link href="/CForgeHUB/css/hugo-theme.css?1677668509" rel="stylesheet">
    
    <link href="/CForgeHUB/css/theme-blue.css?1677668509" rel="stylesheet">
    
    

    <script src="/CForgeHUB/js/jquery-3.3.1.min.js?1677668509"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="CForgeHUB/concepts/basic/multi_viewport/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <h3><a href="http://localhost:1313/"> <img src="/CrossForgeLogo2.png" alt=""/></a></h3>
    </div>
    
  </div>
  
    <section id="homelinks">
      <ul>
        <li>
            <a class="padding" href='/'><i class='fas fa-home'></i> Home</a>
        </li>
      </ul>
    </section>
  

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="CForgeHUB/first_steps/" title="First Steps" class="dd-item
        
        
        
        ">
      <a href="CForgeHUB/first_steps/">
          First Steps
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="CForgeHUB/first_steps/tutorial/" title="Installation" class="dd-item ">
        <a href="CForgeHUB/first_steps/tutorial/">
        Installation
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="CForgeHUB/first_steps/firststart/" title="First Running Programm" class="dd-item ">
        <a href="CForgeHUB/first_steps/firststart/">
        First Running Programm
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="CForgeHUB/my_first_scene/" title="Your First Scene" class="dd-item
        
        
        
        ">
      <a href="CForgeHUB/my_first_scene/">
          Your First Scene
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="CForgeHUB/my_first_scene/setting_up_scene/" title="Setting up a Scene" class="dd-item
        
        
        
        ">
      <a href="CForgeHUB/my_first_scene/setting_up_scene/">
          Setting up a Scene
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="CForgeHUB/my_first_scene/basic_scene/" title="Basic Scene" class="dd-item
        
        
        
        ">
      <a href="CForgeHUB/my_first_scene/basic_scene/">
          Basic Scene
          
      </a>
      
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="CForgeHUB/concepts/" title="Concepts" class="dd-item
        parent
        
        
        ">
      <a href="CForgeHUB/concepts/">
          Concepts
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="CForgeHUB/concepts/basic/" title="Basic" class="dd-item
        parent
        
        
        ">
      <a href="CForgeHUB/concepts/basic/">
          Basic
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="CForgeHUB/concepts/basic/skybox/" title="Skybox" class="dd-item ">
        <a href="CForgeHUB/concepts/basic/skybox/">
        Skybox
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="CForgeHUB/concepts/basic/multi_viewport/" title="Multi Viewport" class="dd-item active">
        <a href="CForgeHUB/concepts/basic/multi_viewport/">
        Multi Viewport
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="CForgeHUB/concepts/basic/scenegraph/" title="Scenegraph" class="dd-item ">
        <a href="CForgeHUB/concepts/basic/scenegraph/">
        Scenegraph
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="CForgeHUB/concepts/basic/sockets/" title="Sockets" class="dd-item ">
        <a href="CForgeHUB/concepts/basic/sockets/">
        Sockets
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="CForgeHUB/concepts/advanced/" title="Advanced" class="dd-item
        
        
        
        ">
      <a href="CForgeHUB/concepts/advanced/">
          Advanced
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="CForgeHUB/concepts/advanced/morphing/" title="Morphing" class="dd-item ">
        <a href="CForgeHUB/concepts/advanced/morphing/">
        Morphing
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="CForgeHUB/concepts/advanced/skeletal_animation/" title="Skeletal Animation" class="dd-item ">
        <a href="CForgeHUB/concepts/advanced/skeletal_animation/">
        Skeletal Animation
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="CForgeHUB/graphics_lecture/" title="Graphics Lectures" class="dd-item
        
        
        
        ">
      <a href="CForgeHUB/graphics_lecture/">
          Graphics Lectures
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="CForgeHUB/graphics_lecture/vectors/" title="Vectors" class="dd-item ">
        <a href="CForgeHUB/graphics_lecture/vectors/">
        Vectors
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="CForgeHUB/graphics_lecture/transformation/" title="Transformations" class="dd-item ">
        <a href="CForgeHUB/graphics_lecture/transformation/">
        Transformations
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="CForgeHUB/showcase/" title="Showcase" class="dd-item
        
        
        
        ">
      <a href="CForgeHUB/showcase/">
          Showcase
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="CForgeHUB/how_to_contribute/" title="How to contribute" class="dd-item
        
        
        
        ">
      <a href="CForgeHUB/how_to_contribute/">
          How to contribute
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="CForgeHUB/how_to_contribute/markdown_guide/" title="Markdown Guide" class="dd-item ">
        <a href="CForgeHUB/how_to_contribute/markdown_guide/">
        Markdown Guide
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="CForgeHUB/how_to_contribute/shortcodes/" title="Shortcodes" class="dd-item ">
        <a href="CForgeHUB/how_to_contribute/shortcodes/">
        Shortcodes
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
  
 

          
        
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li>
                  <a class="padding" href="https://github.com/CrossForge/CrossForge"><i class='fab fa-github'></i> Github repo</a>
              </li>
          
              <li>
                  <a class="padding" href="https://www.tu-chemnitz.de/informatik/GDV/"><i class='fas fa-bookmark'></i> TU Chemnitz</a>
              </li>
          
              <li>
                  <a class="padding" href="CForgeHUB/CForgeHUB/wiki/"><i class='fas fa-bookmark'></i> About the Wiki</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            
            
          
          
            <a href='CForgeHUB/'>Introduction</a> > <a href='CForgeHUB/concepts/'>Concepts</a> > <a href='CForgeHUB/concepts/basic/'>Basic</a> > Multi Viewport
          
        
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li></li>
        <li><a href="#with-that-here-a-litte-review-of-what-we-created">With that here a litte review of what we created</a></li>
      </ul>
    </li>
    <li><a href="#cheatsheet">CheatSheet</a></li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Multi Viewport
            </h1>
          

        



<h4 id="when-viewing-your-creations-normally-one-viewport-is-all-you-need-but-if-needed-crossforge-also-supports-multiple-viewports">When viewing your creations, normally one viewport is all you need, but if needed Crossforge also supports multiple Viewports.</h4>
<p>Mainly there two ways of achieving multiple Viewports, the first way is by using one scenegraph and multiple virtual cameras, the second way is by using multiple scenegraphs with one camera setup.</p>
<p><strong>1) Multiple scenegraphs</strong></p>
<p>First off we begin with the way of using <strong>multiple scenegraphs</strong>, but why would you want to use this way?</p>
<p>Using multiple scene graphs can be useful when you want to compare different objects or models in the same scene with the same camera perspective.</p>
<p>First we need to initialize the variables in the protected section:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>	SceneGraph m_SGs[<span style="color:#ae81ff">4</span>];
</span></span><span style="display:flex;"><span>	SGNTransformation m_RootSGNs[<span style="color:#ae81ff">4</span>];
</span></span></code></pre></div><p>To build <strong>multiple scenegraphs</strong> we can use a for loop inside of the <strong>init</strong> section:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">uint8_t</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">4</span>; <span style="color:#f92672">++</span>i) {
</span></span><span style="display:flex;"><span>	m_RootSGNs[i].init(<span style="color:#66d9ef">nullptr</span>);
</span></span><span style="display:flex;"><span>	m_SGs[i].init(<span style="color:#f92672">&amp;</span>m_RootSGNs[i]);
</span></span><span style="display:flex;"><span>	}
</span></span></code></pre></div><p>Within the loop we can create objects for each scenegraph <strong>simultaneously</strong>, for example lets add an helmet:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">uint8_t</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">4</span>; <span style="color:#f92672">++</span>i) {
</span></span><span style="display:flex;"><span>	m_RootSGNs[i].init(<span style="color:#66d9ef">nullptr</span>);
</span></span><span style="display:flex;"><span>	m_SGs[i].init(<span style="color:#f92672">&amp;</span>m_RootSGNs[i]);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    m_HelmetTransSGNs[i].init(<span style="color:#f92672">&amp;</span>m_RootSGNs[i], Vector3f(<span style="color:#ae81ff">0.0f</span>, <span style="color:#ae81ff">3.5f</span>, <span style="color:#ae81ff">0.0f</span>));
</span></span><span style="display:flex;"><span>	m_HelmetGeomSGNs[i].init(<span style="color:#f92672">&amp;</span>m_HelmetTransSGNs[i], <span style="color:#f92672">&amp;</span>m_Helmet, Vector3f<span style="color:#f92672">::</span>Zero(), Quaternionf<span style="color:#f92672">::</span>Identity(), Vector3f(<span style="color:#ae81ff">3.0f</span>, <span style="color:#ae81ff">3.0f</span>, <span style="color:#ae81ff">3.0f</span>));
</span></span><span style="display:flex;"><span>	}
</span></span></code></pre></div><p>But for that the helmet itself as an actor, its Transformation and Geometry Nodes need to be initialized first in the <strong>protected</strong> section:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>	StaticActor m_Helmet;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	SGNTransformation m_HelmetTransSGNs[<span style="color:#ae81ff">4</span>];
</span></span><span style="display:flex;"><span>	SGNGeometry m_HelmetGeomSGNs[<span style="color:#ae81ff">4</span>];
</span></span></code></pre></div><p>Also the helmet needs to be loaded and textured beforehand inside the init function:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>	T3DMesh<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">float</span><span style="color:#f92672">&gt;</span> M;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	SAssetIO<span style="color:#f92672">::</span>load(<span style="color:#e6db74">&#34;Assets/ExampleScenes/Helmet/DamagedHelmet.gltf&#34;</span>, <span style="color:#f92672">&amp;</span>M);
</span></span><span style="display:flex;"><span>	setMeshShader(<span style="color:#f92672">&amp;</span>M, <span style="color:#ae81ff">0.2f</span>, <span style="color:#ae81ff">0.24f</span>);
</span></span><span style="display:flex;"><span>	M.computePerVertexNormals();
</span></span><span style="display:flex;"><span>	M.computePerVertexTangents();
</span></span><span style="display:flex;"><span>	m_Helmet.init(<span style="color:#f92672">&amp;</span>M);
</span></span><span style="display:flex;"><span>	M.clear();
</span></span></code></pre></div><p>Now let us try to make each helmet in these scenegraphs spin in the same speed but in different rotations, for  that we need to create these rotation values <strong>before the loop</strong> like so:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>    <span style="color:#66d9ef">float</span> Speed <span style="color:#f92672">=</span> <span style="color:#ae81ff">10.0f</span>; <span style="color:#75715e">// Degree per second
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	Quaternionf HelmetRotationDeltas[<span style="color:#ae81ff">4</span>];
</span></span><span style="display:flex;"><span>	HelmetRotationDeltas[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">=</span> AngleAxisf(GraphicsUtility<span style="color:#f92672">::</span>degToRad(Speed <span style="color:#f92672">/</span> <span style="color:#ae81ff">60.0f</span>), Vector3f<span style="color:#f92672">::</span>UnitX());
</span></span><span style="display:flex;"><span>	HelmetRotationDeltas[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">=</span> AngleAxisf(GraphicsUtility<span style="color:#f92672">::</span>degToRad(Speed <span style="color:#f92672">/</span> <span style="color:#ae81ff">60.0f</span>), Vector3f<span style="color:#f92672">::</span>UnitY());
</span></span><span style="display:flex;"><span>	HelmetRotationDeltas[<span style="color:#ae81ff">2</span>] <span style="color:#f92672">=</span> AngleAxisf(GraphicsUtility<span style="color:#f92672">::</span>degToRad(Speed <span style="color:#f92672">/</span> <span style="color:#ae81ff">60.0f</span>), Vector3f<span style="color:#f92672">::</span>UnitZ());
</span></span><span style="display:flex;"><span>	HelmetRotationDeltas[<span style="color:#ae81ff">3</span>] <span style="color:#f92672">=</span> AngleAxisf(GraphicsUtility<span style="color:#f92672">::</span>degToRad(Speed <span style="color:#f92672">/</span> <span style="color:#ae81ff">60.0f</span>), Vector3f(<span style="color:#ae81ff">1.0f</span>, <span style="color:#ae81ff">1.0f</span>, <span style="color:#ae81ff">1.0f</span>).normalized());
</span></span></code></pre></div><p>And lastly let us add the rotation <strong>in</strong> the for-loop:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">uint8_t</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">4</span>; <span style="color:#f92672">++</span>i) {
</span></span><span style="display:flex;"><span>	m_RootSGNs[i].init(<span style="color:#66d9ef">nullptr</span>);
</span></span><span style="display:flex;"><span>	m_SGs[i].init(<span style="color:#f92672">&amp;</span>m_RootSGNs[i]);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    m_HelmetTransSGNs[i].init(<span style="color:#f92672">&amp;</span>m_RootSGNs[i], Vector3f(<span style="color:#ae81ff">0.0f</span>, <span style="color:#ae81ff">3.5f</span>, <span style="color:#ae81ff">0.0f</span>));
</span></span><span style="display:flex;"><span>	m_HelmetGeomSGNs[i].init(<span style="color:#f92672">&amp;</span>m_HelmetTransSGNs[i], <span style="color:#f92672">&amp;</span>m_Helmet, Vector3f<span style="color:#f92672">::</span>Zero(), Quaternionf<span style="color:#f92672">::</span>Identity(), Vector3f(<span style="color:#ae81ff">3.0f</span>, <span style="color:#ae81ff">3.0f</span>, <span style="color:#ae81ff">3.0f</span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    m_HelmetTransSGNs[i].rotationDelta(HelmetRotationDeltas[i]);
</span></span><span style="display:flex;"><span>	}
</span></span></code></pre></div><p>To view the newly created scenegraphs we need to create viewports, one for the GBuffer and four for the scenegraphs we created</p>
<p>For that we initialize those viewports in the <strong>protected</strong> section:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>	RenderDevice<span style="color:#f92672">::</span>Viewport m_GBufferVP;
</span></span><span style="display:flex;"><span>	RenderDevice<span style="color:#f92672">::</span>Viewport m_VPs[<span style="color:#ae81ff">4</span>];
</span></span></code></pre></div><p>Next set the viewport for the GBuffer <strong>after the for-loop</strong> from before:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>	_GBufferVP.Position <span style="color:#f92672">=</span> Vector2i(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>);	
</span></span><span style="display:flex;"><span>	m_GBufferVP.Size <span style="color:#f92672">=</span> Vector2i(m_RenderDev.gBuffer()<span style="color:#f92672">-&gt;</span>width(), m_RenderDev.gBuffer()<span style="color:#f92672">-&gt;</span>height());
</span></span><span style="display:flex;"><span>	m_RenderDev.viewport(RenderDevice<span style="color:#f92672">::</span>RENDERPASS_GEOMETRY, m_GBufferVP);
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//and lets add the function we will write later for updating our viewports
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	updateViewportsAndCamera();
</span></span></code></pre></div><p>With that done, lets switch to the run function where our rendering is handled, here we add another for-loop to perform the rendering of the four viewports:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">uint8_t</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">4</span>; <span style="color:#f92672">++</span>i) {
</span></span><span style="display:flex;"><span>	m_SGs[i].update(<span style="color:#ae81ff">60.0f</span> <span style="color:#f92672">/</span> m_FPS);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	m_RenderDev.activePass(RenderDevice<span style="color:#f92672">::</span>RENDERPASS_SHADOW, <span style="color:#f92672">&amp;</span>m_Sun);
</span></span><span style="display:flex;"><span>	m_SGs[i].render(<span style="color:#f92672">&amp;</span>m_RenderDev);
</span></span><span style="display:flex;"><span>	m_RenderDev.activePass(RenderDevice<span style="color:#f92672">::</span>RENDERPASS_GEOMETRY);
</span></span><span style="display:flex;"><span>	m_SGs[i].render(<span style="color:#f92672">&amp;</span>m_RenderDev);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	m_RenderDev.viewport(RenderDevice<span style="color:#f92672">::</span>RENDERPASS_LIGHTING, m_VPs[i]);
</span></span><span style="display:flex;"><span>	m_RenderDev.activePass(RenderDevice<span style="color:#f92672">::</span>RENDERPASS_LIGHTING, <span style="color:#66d9ef">nullptr</span>, (i <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>) <span style="color:#f92672">?</span> true <span style="color:#f92672">:</span> false);
</span></span><span style="display:flex;"><span>	}
</span></span></code></pre></div><p>Lastly lets align those four viewports and update them via a function called <strong>updateViewportsAndCamera()</strong> inside the protected section:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">updateViewportsAndCamera</span>(<span style="color:#66d9ef">void</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">uint32_t</span> RenderWinWidth <span style="color:#f92672">=</span> m_RenderWin.width();
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">uint32_t</span> RenderWinHeight <span style="color:#f92672">=</span> m_RenderWin.height();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">uint32_t</span> Margin <span style="color:#f92672">=</span> <span style="color:#ae81ff">14</span>;
</span></span><span style="display:flex;"><span>	Vector2i VPSize <span style="color:#f92672">=</span> Vector2i(RenderWinWidth <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>, RenderWinHeight <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>) <span style="color:#f92672">-</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">*</span> Vector2i(Margin, Margin) <span style="color:#f92672">+</span> Vector2i(Margin <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>, Margin <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// Top left
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	m_VPs[<span style="color:#ae81ff">0</span>].Position <span style="color:#f92672">=</span> Vector2i(<span style="color:#ae81ff">0</span>, RenderWinHeight <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>) <span style="color:#f92672">+</span> Vector2i(Margin, Margin <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>);
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// top right
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	m_VPs[<span style="color:#ae81ff">1</span>].Position <span style="color:#f92672">=</span> Vector2i(RenderWinWidth <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>, RenderWinHeight <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>) <span style="color:#f92672">+</span> Vector2i(Margin <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>, Margin <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>);
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// bottom left
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	m_VPs[<span style="color:#ae81ff">2</span>].Position <span style="color:#f92672">=</span> Vector2i(Margin, Margin);
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// bottom right
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	m_VPs[<span style="color:#ae81ff">3</span>].Position <span style="color:#f92672">=</span> Vector2i(RenderWinWidth <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">0</span>) <span style="color:#f92672">+</span> Vector2i(Margin <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>, Margin);
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">uint8_t</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">4</span>; <span style="color:#f92672">++</span>i) 
</span></span><span style="display:flex;"><span>		{
</span></span><span style="display:flex;"><span>			m_VPs[i].Size <span style="color:#f92672">=</span> VPSize;
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	m_Cam.projectionMatrix(m_VPs[<span style="color:#ae81ff">0</span>].Size[<span style="color:#ae81ff">0</span>], m_VPs[<span style="color:#ae81ff">0</span>].Size[<span style="color:#ae81ff">1</span>], GraphicsUtility<span style="color:#f92672">::</span>degToRad(<span style="color:#ae81ff">45.0f</span>), <span style="color:#ae81ff">0.1f</span>, <span style="color:#ae81ff">1000.0f</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	m_GBufferVP.Size <span style="color:#f92672">=</span> Vector2i(m_RenderDev.gBuffer()<span style="color:#f92672">-&gt;</span>width(), m_RenderDev.gBuffer()<span style="color:#f92672">-&gt;</span>height());
</span></span><span style="display:flex;"><span>	m_RenderDev.viewport(RenderDevice<span style="color:#f92672">::</span>RENDERPASS_GEOMETRY, m_GBufferVP);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// viewport for forward pass (required for correct screenshots)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	RenderDevice<span style="color:#f92672">::</span>Viewport VFPass;
</span></span><span style="display:flex;"><span>	VFPass.Position <span style="color:#f92672">=</span> Vector2i(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>	VFPass.Size <span style="color:#f92672">=</span> Vector2i(RenderWinWidth, RenderWinHeight);
</span></span><span style="display:flex;"><span>	m_RenderDev.viewport(RenderDevice<span style="color:#f92672">::</span>RENDERPASS_FORWARD, VFPass);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	}<span style="color:#75715e">//updateViewports
</span></span></span></code></pre></div><h3 align="center" id="with-that-here-a-litte-review-of-what-we-created">With that here a litte review of what we created</h3>
<p><img src="/multiple_viewports_concept.gif" alt="multiple view ports scene as a gif"></p>
<p><strong>ToDo: Code Cheat Sheet via aufklappbaren Text, <!-- raw HTML omitted --> funktioniert nicht soweit</strong></p>
<p><strong>2) Multiple virtual cameras</strong></p>
<p>The second way of using <strong>multiple virtual cameras</strong> can be useful if you want different perspectives or for example when creating virtual reality applications to simulate stereoscopic vision.</p>
<p><strong>ToDo: Während des Development Prozesses des VR-Games nachträglich einfügen</strong></p>
<h2 id="cheatsheet">CheatSheet</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#75715e">/*****************************************************************************\
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">*                                                                           *
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">* File(s): exampleMultiViewport.hpp                                            *
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">*                                                                           *
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">* Content: Example scene that shows minimum setup with an OpenGL capable   *
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">*          window, lighting setup, and a single moving object.              *
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">*                                                                           *
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">*                                                                           *
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">* Author(s): Tom Uhlmann                                                    *
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">*                                                                           *
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">*                                                                           *
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">* The file(s) mentioned above are provided as is under the terms of the     *
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">* FreeBSD License without any warranty or guaranty to work properly.        *
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">* For additional license, copyright and contact/support issues see the      *
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">* supplied documentation.                                                   *
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">*                                                                           *
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">\****************************************************************************/</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#ifndef __CFORGE_EXAMPLEMULTIVIEWPORT_HPP__
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#define __CFORGE_EXAMPLEMULTIVIEWPORT_HPP__
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&#34;exampleSceneBase.hpp&#34;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> Eigen;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">namespace</span> CForge {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ExampleMultiViewport</span> <span style="color:#f92672">:</span> <span style="color:#66d9ef">public</span> ExampleSceneBase {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>		ExampleMultiViewport(<span style="color:#66d9ef">void</span>) {
</span></span><span style="display:flex;"><span>			m_WindowTitle <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;CrossForge Example - Multiple Viewports&#34;</span>;
</span></span><span style="display:flex;"><span>			m_RenderBufferScale <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>; <span style="color:#75715e">// only half resolution of render buffer (GBuffer)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		}<span style="color:#75715e">//Constructor
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">~</span>ExampleMultiViewport(<span style="color:#66d9ef">void</span>) {
</span></span><span style="display:flex;"><span>			clear();
</span></span><span style="display:flex;"><span>		}<span style="color:#75715e">//Destructor
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">init</span>(<span style="color:#66d9ef">void</span>) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>			initWindowAndRenderDevice();
</span></span><span style="display:flex;"><span>			initCameraAndLights();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>			<span style="color:#75715e">// load skydome and a textured cube
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>			T3DMesh<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">float</span><span style="color:#f92672">&gt;</span> M;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>			SAssetIO<span style="color:#f92672">::</span>load(<span style="color:#e6db74">&#34;Assets/ExampleScenes/Helmet/DamagedHelmet.gltf&#34;</span>, <span style="color:#f92672">&amp;</span>M);
</span></span><span style="display:flex;"><span>			setMeshShader(<span style="color:#f92672">&amp;</span>M, <span style="color:#ae81ff">0.2f</span>, <span style="color:#ae81ff">0.24f</span>);
</span></span><span style="display:flex;"><span>			M.computePerVertexNormals();
</span></span><span style="display:flex;"><span>			M.computePerVertexTangents();
</span></span><span style="display:flex;"><span>			m_Helmet.init(<span style="color:#f92672">&amp;</span>M);
</span></span><span style="display:flex;"><span>			M.clear();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>			<span style="color:#75715e">// build scene graphs (one for every viewport)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">float</span> Speed <span style="color:#f92672">=</span> <span style="color:#ae81ff">10.0f</span>; <span style="color:#75715e">// Degree per second
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>			Quaternionf HelmetRotationDeltas[<span style="color:#ae81ff">4</span>];
</span></span><span style="display:flex;"><span>			HelmetRotationDeltas[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">=</span> AngleAxisf(GraphicsUtility<span style="color:#f92672">::</span>degToRad(Speed <span style="color:#f92672">/</span> <span style="color:#ae81ff">60.0f</span>), Vector3f<span style="color:#f92672">::</span>UnitX());
</span></span><span style="display:flex;"><span>			HelmetRotationDeltas[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">=</span> AngleAxisf(GraphicsUtility<span style="color:#f92672">::</span>degToRad(Speed <span style="color:#f92672">/</span> <span style="color:#ae81ff">60.0f</span>), Vector3f<span style="color:#f92672">::</span>UnitY());
</span></span><span style="display:flex;"><span>			HelmetRotationDeltas[<span style="color:#ae81ff">2</span>] <span style="color:#f92672">=</span> AngleAxisf(GraphicsUtility<span style="color:#f92672">::</span>degToRad(Speed <span style="color:#f92672">/</span> <span style="color:#ae81ff">60.0f</span>), Vector3f<span style="color:#f92672">::</span>UnitZ());
</span></span><span style="display:flex;"><span>			HelmetRotationDeltas[<span style="color:#ae81ff">3</span>] <span style="color:#f92672">=</span> AngleAxisf(GraphicsUtility<span style="color:#f92672">::</span>degToRad(Speed <span style="color:#f92672">/</span> <span style="color:#ae81ff">60.0f</span>), Vector3f(<span style="color:#ae81ff">1.0f</span>, <span style="color:#ae81ff">1.0f</span>, <span style="color:#ae81ff">1.0f</span>).normalized());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">uint8_t</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">4</span>; <span style="color:#f92672">++</span>i) {
</span></span><span style="display:flex;"><span>				m_RootSGNs[i].init(<span style="color:#66d9ef">nullptr</span>);
</span></span><span style="display:flex;"><span>				m_SGs[i].init(<span style="color:#f92672">&amp;</span>m_RootSGNs[i]);
</span></span><span style="display:flex;"><span>				m_HelmetTransSGNs[i].init(<span style="color:#f92672">&amp;</span>m_RootSGNs[i], Vector3f(<span style="color:#ae81ff">0.0f</span>, <span style="color:#ae81ff">3.5f</span>, <span style="color:#ae81ff">0.0f</span>));
</span></span><span style="display:flex;"><span>				m_HelmetGeomSGNs[i].init(<span style="color:#f92672">&amp;</span>m_HelmetTransSGNs[i], <span style="color:#f92672">&amp;</span>m_Helmet, Vector3f<span style="color:#f92672">::</span>Zero(), Quaternionf<span style="color:#f92672">::</span>Identity(), Vector3f(<span style="color:#ae81ff">3.0f</span>, <span style="color:#ae81ff">3.0f</span>, <span style="color:#ae81ff">3.0f</span>));
</span></span><span style="display:flex;"><span>				m_HelmetTransSGNs[i].rotationDelta(HelmetRotationDeltas[i]);
</span></span><span style="display:flex;"><span>			}	
</span></span><span style="display:flex;"><span>			m_GBufferVP.Position <span style="color:#f92672">=</span> Vector2i(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>);	
</span></span><span style="display:flex;"><span>			m_GBufferVP.Size <span style="color:#f92672">=</span> Vector2i(m_RenderDev.gBuffer()<span style="color:#f92672">-&gt;</span>width(), m_RenderDev.gBuffer()<span style="color:#f92672">-&gt;</span>height());
</span></span><span style="display:flex;"><span>			m_RenderDev.viewport(RenderDevice<span style="color:#f92672">::</span>RENDERPASS_GEOMETRY, m_GBufferVP);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>			updateViewportsAndCamera();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>			std<span style="color:#f92672">::</span>string GLError <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>;
</span></span><span style="display:flex;"><span>			GraphicsUtility<span style="color:#f92672">::</span>checkGLError(<span style="color:#f92672">&amp;</span>GLError);
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>GLError.empty()) printf(<span style="color:#e6db74">&#34;GLError occurred: %s</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, GLError.c_str());
</span></span><span style="display:flex;"><span>		}<span style="color:#75715e">//initialize
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">clear</span>(<span style="color:#66d9ef">void</span>) {
</span></span><span style="display:flex;"><span>			ExampleSceneBase<span style="color:#f92672">::</span>clear();
</span></span><span style="display:flex;"><span>		}<span style="color:#75715e">//clear
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">run</span>(<span style="color:#66d9ef">void</span>) {
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">while</span> (<span style="color:#f92672">!</span>m_RenderWin.shutdown()) {
</span></span><span style="display:flex;"><span>				m_RenderWin.update();
</span></span><span style="display:flex;"><span>				defaultCameraUpdate(<span style="color:#f92672">&amp;</span>m_Cam, m_RenderWin.keyboard(), m_RenderWin.mouse());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>				<span style="color:#75715e">// perform rendering for the 4 viewports
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>				<span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">uint8_t</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">4</span>; <span style="color:#f92672">++</span>i) {
</span></span><span style="display:flex;"><span>					m_SGs[i].update(<span style="color:#ae81ff">60.0f</span> <span style="color:#f92672">/</span> m_FPS);
</span></span><span style="display:flex;"><span>					m_RenderDev.activePass(RenderDevice<span style="color:#f92672">::</span>RENDERPASS_SHADOW, <span style="color:#f92672">&amp;</span>m_Sun);
</span></span><span style="display:flex;"><span>					m_SGs[i].render(<span style="color:#f92672">&amp;</span>m_RenderDev);
</span></span><span style="display:flex;"><span>					m_RenderDev.activePass(RenderDevice<span style="color:#f92672">::</span>RENDERPASS_GEOMETRY);
</span></span><span style="display:flex;"><span>					m_SGs[i].render(<span style="color:#f92672">&amp;</span>m_RenderDev);
</span></span><span style="display:flex;"><span>					m_RenderDev.viewport(RenderDevice<span style="color:#f92672">::</span>RENDERPASS_LIGHTING, m_VPs[i]);
</span></span><span style="display:flex;"><span>					m_RenderDev.activePass(RenderDevice<span style="color:#f92672">::</span>RENDERPASS_LIGHTING, <span style="color:#66d9ef">nullptr</span>, (i <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>) <span style="color:#f92672">?</span> true <span style="color:#f92672">:</span> false);
</span></span><span style="display:flex;"><span>				}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>				m_RenderWin.swapBuffers();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>				updateFPS();
</span></span><span style="display:flex;"><span>				defaultKeyboardUpdate(m_RenderWin.keyboard());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>			}<span style="color:#75715e">//while[main loop]
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		}<span style="color:#75715e">//run
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">protected</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">void</span> updateViewportsAndCamera(<span style="color:#66d9ef">void</span>) {
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">uint32_t</span> RenderWinWidth <span style="color:#f92672">=</span> m_RenderWin.width();
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">uint32_t</span> RenderWinHeight <span style="color:#f92672">=</span> m_RenderWin.height();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">uint32_t</span> Margin <span style="color:#f92672">=</span> <span style="color:#ae81ff">14</span>;
</span></span><span style="display:flex;"><span>			Vector2i VPSize <span style="color:#f92672">=</span> Vector2i(RenderWinWidth <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>, RenderWinHeight <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>) <span style="color:#f92672">-</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">*</span> Vector2i(Margin, Margin) <span style="color:#f92672">+</span> Vector2i(Margin <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>, Margin <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>			<span style="color:#75715e">// Top left
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>			m_VPs[<span style="color:#ae81ff">0</span>].Position <span style="color:#f92672">=</span> Vector2i(<span style="color:#ae81ff">0</span>, RenderWinHeight <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>) <span style="color:#f92672">+</span> Vector2i(Margin, Margin <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>);
</span></span><span style="display:flex;"><span>			<span style="color:#75715e">// top right
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>			m_VPs[<span style="color:#ae81ff">1</span>].Position <span style="color:#f92672">=</span> Vector2i(RenderWinWidth <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>, RenderWinHeight <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>) <span style="color:#f92672">+</span> Vector2i(Margin <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>, Margin <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>);
</span></span><span style="display:flex;"><span>			<span style="color:#75715e">// bottom left
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>			m_VPs[<span style="color:#ae81ff">2</span>].Position <span style="color:#f92672">=</span> Vector2i(Margin, Margin);
</span></span><span style="display:flex;"><span>			<span style="color:#75715e">// bottom right
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>			m_VPs[<span style="color:#ae81ff">3</span>].Position <span style="color:#f92672">=</span> Vector2i(RenderWinWidth <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">0</span>) <span style="color:#f92672">+</span> Vector2i(Margin <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>, Margin);
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">uint8_t</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">4</span>; <span style="color:#f92672">++</span>i) m_VPs[i].Size <span style="color:#f92672">=</span> VPSize;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>			m_Cam.projectionMatrix(m_VPs[<span style="color:#ae81ff">0</span>].Size[<span style="color:#ae81ff">0</span>], m_VPs[<span style="color:#ae81ff">0</span>].Size[<span style="color:#ae81ff">1</span>], GraphicsUtility<span style="color:#f92672">::</span>degToRad(<span style="color:#ae81ff">45.0f</span>), <span style="color:#ae81ff">0.1f</span>, <span style="color:#ae81ff">1000.0f</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>			m_GBufferVP.Size <span style="color:#f92672">=</span> Vector2i(m_RenderDev.gBuffer()<span style="color:#f92672">-&gt;</span>width(), m_RenderDev.gBuffer()<span style="color:#f92672">-&gt;</span>height());
</span></span><span style="display:flex;"><span>			m_RenderDev.viewport(RenderDevice<span style="color:#f92672">::</span>RENDERPASS_GEOMETRY, m_GBufferVP);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>			<span style="color:#75715e">// viewport for forward pass (required for correct screenshots)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>			RenderDevice<span style="color:#f92672">::</span>Viewport VFPass;
</span></span><span style="display:flex;"><span>			VFPass.Position <span style="color:#f92672">=</span> Vector2i(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>			VFPass.Size <span style="color:#f92672">=</span> Vector2i(RenderWinWidth, RenderWinHeight);
</span></span><span style="display:flex;"><span>			m_RenderDev.viewport(RenderDevice<span style="color:#f92672">::</span>RENDERPASS_FORWARD, VFPass);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		}<span style="color:#75715e">//updateViewports
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">listen</span>(GLWindowMsg Msg) {
</span></span><span style="display:flex;"><span>			ExampleSceneBase<span style="color:#f92672">::</span>listen(Msg);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>			updateViewportsAndCamera();
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		StaticActor m_Helmet;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		SceneGraph m_SGs[<span style="color:#ae81ff">4</span>];
</span></span><span style="display:flex;"><span>		SGNTransformation m_RootSGNs[<span style="color:#ae81ff">4</span>];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		SGNTransformation m_HelmetTransSGNs[<span style="color:#ae81ff">4</span>];
</span></span><span style="display:flex;"><span>		SGNGeometry m_HelmetGeomSGNs[<span style="color:#ae81ff">4</span>];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">// required viewports
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		RenderDevice<span style="color:#f92672">::</span>Viewport m_GBufferVP;
</span></span><span style="display:flex;"><span>		RenderDevice<span style="color:#f92672">::</span>Viewport m_VPs[<span style="color:#ae81ff">4</span>];
</span></span><span style="display:flex;"><span>	};<span style="color:#75715e">//ExampleMultiViewport
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">exampleMultiViewport</span>(<span style="color:#66d9ef">void</span>) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		ExampleMultiViewport Ex;
</span></span><span style="display:flex;"><span>		Ex.init();
</span></span><span style="display:flex;"><span>		Ex.run();
</span></span><span style="display:flex;"><span>		Ex.clear();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	}<span style="color:#75715e">//exampleMultiViewport
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#endif 
</span></span></span></code></pre></div>

<footer class="footline">
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
        
                    
            
        

        


	 
	 
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/CForgeHUB/js/clipboard.min.js?1677668509"></script>
    <script src="/CForgeHUB/js/perfect-scrollbar.min.js?1677668509"></script>
    <script src="/CForgeHUB/js/perfect-scrollbar.jquery.min.js?1677668509"></script>
    <script src="/CForgeHUB/js/jquery.sticky.js?1677668509"></script>
    <script src="/CForgeHUB/js/featherlight.min.js?1677668509"></script>
    <script src="/CForgeHUB/js/highlight.pack.js?1677668509"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/CForgeHUB/js/modernizr.custom-3.6.0.js?1677668509"></script>
    <script src="/CForgeHUB/js/learn.js?1677668509"></script>
    <script src="/CForgeHUB/js/hugo-learn.js?1677668509"></script>
    
        
            <script src="/CForgeHUB/mermaid/mermaid.js?1677668509"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    

  </body>
</html>

